<!DOCTYPE html>
<html>
<head>
    <title>Simple RPS Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
        .result { margin: 20px 0; padding: 20px; background: #f0f0f0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Simple Rock Paper Scissors Test</h1>
    
    <div>
        <h3>Make your move:</h3>
        <button onclick="makeMove('paper')" id="move-paper">Paper (A)</button>
        <button onclick="makeMove('scissor')" id="move-scissor">Scissor (W)</button>
        <button onclick="makeMove('stone')" id="move-stone">Stone (D)</button>
    </div>
    
    <div id="result" class="result">
        Press a button or use keys A, W, D to play!
    </div>
    
    <script>
        // Add keyboard support
        document.addEventListener('keydown', function(e) {
            console.log('Key pressed:', e.key);
            if (e.key === 'a') makeMove('paper');
            if (e.key === 'w') makeMove('scissor');
            if (e.key === 'd') makeMove('stone');
        });
        
        function makeMove(move) {
            console.log('Making move:', move);
            document.getElementById('result').innerHTML = 'Making move: ' + move + '...';
            
            fetch('/play', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    move: move,
                    difficulty: 'enhanced',
                    multiplayer: false
                })
            })
            .then(response => {
                console.log('Response received:', response);
                return response.json();
            })
            .then(data => {
                console.log('Data received:', data);
                document.getElementById('result').innerHTML = 
                    '<h3>Round ' + data.round + '</h3>' +
                    '<p>You: ' + move + ' | Computer: ' + data.robot_move + '</p>' +
                    '<p>Result: ' + data.result + '</p>' +
                    '<p>Score - You: ' + data.stats.human_win + ' | Computer: ' + data.stats.robot_win + '</p>';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = 'Error: ' + error.message;
            });
        }
    </script>
</body>
</html>